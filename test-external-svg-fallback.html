<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>External SVG Icon Fallback Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .controls {
            background: #e8f4fd;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #007cba;
        }

        .controls h2 {
            margin-top: 0;
            color: #007cba;
        }

        .controls button {
            margin: 5px 10px 5px 0;
            padding: 10px 15px;
            background: #007cba;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }

        .controls button:hover {
            background: #005a87;
        }

        .status {
            padding: 15px;
            background: #f0f8ff;
            margin: 15px 0;
            border-left: 4px solid #007cba;
            font-weight: 500;
        }

        .nav-social {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 8px;
            margin: 20px 0;
        }

        .nav-social-link {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 0.5rem;
            background: #e0e0e0;
            color: #333;
            text-decoration: none;
            transition: all 0.2s ease;
            border: 1px solid #ccc;
            position: relative;
            margin: 0 0.375rem;
        }

        .nav-social-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .nav-social-link.github:hover {
            background: #24292e;
            color: white;
        }

        .nav-social-link.linkedin:hover {
            background: #0077b5;
            color: white;
        }

        .nav-social-link.orcid:hover {
            background: #a6ce39;
            color: white;
        }

        .social-icon {
            width: 1.2rem;
            height: 1.2rem;
            display: inline-block;
            transition: all 0.2s ease;
            vertical-align: middle;
            /* Dark icons for light theme */
            filter: brightness(0) saturate(100%) invert(15%) sepia(13%) saturate(2497%) hue-rotate(201deg) brightness(97%) contrast(85%);
        }

        /* Dark theme styles */
        [data-theme="dark"] {
            background: #1a1a1a !important;
            color: #e0e0e0 !important;
        }

        [data-theme="dark"] .container {
            background: #2a2a2a !important;
            color: #e0e0e0 !important;
        }

        [data-theme="dark"] .controls {
            background: #1e3a5f !important;
            color: #e0e0e0 !important;
        }

        [data-theme="dark"] .controls h2 {
            color: #60a5fa !important;
        }

        [data-theme="dark"] .status {
            background: #1e293b !important;
            color: #e0e0e0 !important;
            border-left-color: #60a5fa !important;
        }

        [data-theme="dark"] .nav-social {
            background: #374151 !important;
        }

        [data-theme="dark"] .nav-social-link {
            background: #4b5563 !important;
            color: #e0e0e0 !important;
            border-color: #6b7280 !important;
        }

        /* Light icons for dark theme */
        [data-theme="dark"] .social-icon {
            filter: brightness(0) saturate(100%) invert(100%) sepia(100%) saturate(0%) hue-rotate(288deg) brightness(102%) contrast(102%);
        }

        /* Hover states - make icons white on colored backgrounds */
        .nav-social-link.github:hover .social-icon,
        .nav-social-link.linkedin:hover .social-icon,
        .nav-social-link.orcid:hover .social-icon {
            filter: brightness(0) saturate(100%) invert(100%) sepia(100%) saturate(0%) hue-rotate(288deg) brightness(102%) contrast(102%);
        }

        [data-theme="dark"] .comparison-item {
            background: #374151 !important;
            color: #e0e0e0 !important;
        }

        [data-theme="dark"] .comparison-item.old {
            background: #3f2937 !important;
        }

        [data-theme="dark"] .comparison-item.new {
            background: #1f2937 !important;
        }

        [data-theme="dark"] #benefits {
            background: #374151 !important;
            color: #e0e0e0 !important;
        }

        .text-fallback {
            display: none;
            font-size: 0.9rem;
            font-weight: bold;
            color: currentColor;
            text-decoration: none;
            user-select: none;
        }

        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .comparison-item {
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #ddd;
        }

        .comparison-item.old {
            background: #fff5f5;
            border-color: #ff6b6b;
        }

        .comparison-item.new {
            background: #f0fff4;
            border-color: #51cf66;
        }

        .comparison-item h3 {
            margin-top: 0;
            color: #333;
        }

        .old h3 { color: #c92a2a; }
        .new h3 { color: #2f9e44; }

        code {
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 13px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="controls">
            <h2>üéØ External SVG Icon Fallback Test</h2>
            <p>This demonstrates the <strong>improved approach</strong> using external SVG files with proper dark theme visibility.</p>
            <button onclick="simulateImageBlocking()">üö´ Simulate Image Blocking</button>
            <button onclick="testImageError()">üîß Test Error Handling</button>
            <button onclick="resetTest()">üîÑ Reset Test</button>
            <button onclick="toggleTheme()">üåô Toggle Dark Theme</button>
            <button onclick="runComparison()">üìä Show Comparison</button>
            <div class="status" id="status">Ready to test the external SVG approach...</div>
        </div>

        <h3>üîó Social Media Icons (External SVG Files)</h3>
        <div class="nav-social" id="nav-social">
            <a href="https://github.com/nepiskopos" target="_blank"
               class="nav-social-link github"
               aria-label="Visit GitHub profile">
                <img src="assets/img/github-icon.svg"
                     alt="GitHub"
                     class="social-icon"
                     width="20"
                     height="20"
                     onerror="this.style.display='none';this.nextElementSibling.style.display='inline-block'">
                <span class="text-fallback">GH</span>
            </a>
            <a href="https://linkedin.com/in/nepiskopos" target="_blank"
               class="nav-social-link linkedin"
               aria-label="Visit LinkedIn profile">
                <img src="assets/img/linkedin-icon.svg"
                     alt="LinkedIn"
                     class="social-icon"
                     width="20"
                     height="20"
                     onerror="this.style.display='none';this.nextElementSibling.style.display='inline-block'">
                <span class="text-fallback">LI</span>
            </a>
            <a href="https://orcid.org/0009-0004-7130-3874" target="_blank"
               class="nav-social-link orcid"
               aria-label="Visit ORCID profile">
                <img src="assets/img/orcid-icon.svg"
                     alt="ORCID"
                     class="social-icon"
                     width="20"
                     height="20"
                     onerror="this.style.display='none';this.nextElementSibling.style.display='inline-block'">
                <span class="text-fallback">OR</span>
            </a>
        </div>

        <div class="comparison" id="comparison" style="display: none;">
            <div class="comparison-item old">
                <h3>‚ùå Old Approach: Inline SVGs</h3>
                <ul>
                    <li>Inline SVG paths are analyzed by ad blockers</li>
                    <li>Complex JavaScript detection required</li>
                    <li>Multiple fallback layers needed</li>
                    <li>Constant monitoring for blocking</li>
                    <li>~1000 lines of JavaScript code</li>
                    <li>High maintenance complexity</li>
                </ul>
                <code>&lt;svg&gt;&lt;path d="M12 0c-6.626..."&gt;&lt;/path&gt;&lt;/svg&gt;</code>
            </div>

            <div class="comparison-item new">
                <h3>‚úÖ New Approach: External SVGs</h3>
                <ul>
                    <li>External files can't be analyzed by ad blockers</li>
                    <li>Simple <code>onerror</code> handling</li>
                    <li>Single fallback layer sufficient</li>
                    <li>Built-in browser error handling</li>
                    <li>~50 lines of JavaScript code</li>
                    <li>Low maintenance complexity</li>
                </ul>
                <code>&lt;img src="icon.svg" onerror="showFallback()"&gt;</code>
            </div>
        </div>

        <div style="margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 8px;" id="benefits">
            <h3>üí° Key Benefits of External SVG Approach</h3>
            <ol>
                <li><strong>Ad Blocker Resistance</strong>: External files can't be analyzed for social media content</li>
                <li><strong>Simplicity</strong>: Uses browser's native image loading and error handling</li>
                <li><strong>Performance</strong>: Images can be cached, reducing load times</li>
                <li><strong>Maintainability</strong>: Separate files are easier to update and manage</li>
                <li><strong>Reliability</strong>: Less dependent on complex JavaScript detection</li>
                <li><strong>Theme Compatibility</strong>: CSS filters ensure proper visibility in both light and dark themes</li>
            </ol>

            <p><strong>üé® Dark Theme Fix:</strong> The icons now use CSS filters to ensure they're dark in light theme and light in dark theme, providing excellent contrast and visibility in all scenarios.</p>
        </div>
    </div>

    <script>
        const statusElement = document.getElementById('status');

        function updateStatus(message) {
            statusElement.textContent = message;
            console.log('TEST:', message);
        }

        function simulateImageBlocking() {
            updateStatus('üö´ Simulating image blocking (changing src to non-existent files)...');

            const images = document.querySelectorAll('.social-icon');
            images.forEach((img, index) => {
                // Change to non-existent file to trigger error
                img.src = `non-existent-icon-${index}.svg`;
            });

            setTimeout(() => {
                updateStatus('üö´ Image blocking simulated - fallback text should be visible!');
            }, 100);
        }

        function testImageError() {
            updateStatus('üîß Testing error handling by manually triggering error events...');

            const images = document.querySelectorAll('.social-icon');
            images.forEach(img => {
                img.dispatchEvent(new Event('error'));
            });

            updateStatus('üîß Error events triggered - text fallbacks should be active!');
        }

        function resetTest() {
            updateStatus('üîÑ Resetting to original state...');

            const images = document.querySelectorAll('.social-icon');
            const platforms = ['github', 'linkedin', 'orcid'];

            images.forEach((img, index) => {
                img.style.display = 'inline-block';
                img.src = `assets/img/${platforms[index]}-icon.svg`;

                const textFallback = img.nextElementSibling;
                if (textFallback) {
                    textFallback.style.display = 'none';
                }
            });

            updateStatus('üîÑ Reset complete - icons should be visible again!');
        }

        function runComparison() {
            const comparison = document.getElementById('comparison');
            if (comparison.style.display === 'none') {
                comparison.style.display = 'grid';
                updateStatus('üìä Comparison shown - see the benefits of the external SVG approach!');
            } else {
                comparison.style.display = 'none';
                updateStatus('üìä Comparison hidden');
            }
        }

        function toggleTheme() {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme');

            if (currentTheme === 'dark') {
                html.removeAttribute('data-theme');
                updateStatus('‚òÄÔ∏è Switched to light theme - icons should be dark and clearly visible');
            } else {
                html.setAttribute('data-theme', 'dark');
                updateStatus('üåô Switched to dark theme - icons should be light and clearly visible');
            }
        }

        // Initialize
        window.addEventListener('load', () => {
            updateStatus('‚úÖ External SVG test page loaded. Ready to test the improved approach!');
        });

        // Add additional error handling for thoroughness
        document.querySelectorAll('.social-icon').forEach(icon => {
            icon.addEventListener('error', function() {
                console.log('üì∑ Icon failed to load:', this.src);
                this.style.display = 'none';
                const textFallback = this.nextElementSibling;
                if (textFallback && textFallback.classList.contains('text-fallback')) {
                    textFallback.style.display = 'inline-block';
                }
            });
        });
    </script>
</body>
</html>
